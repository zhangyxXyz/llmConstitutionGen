{
    "workpath": "../SoulClient/",
    "cleanpath": [
        ".cursor/rules",
        ".claude/skills",
        ".codebuddy/skills"
    ],
    "content_rules": {
        "remoteLLMReviewRules/CODEBUDDY.md": {
            "filter": [],
            "process": [
                {
                    "operation": "replace",
                    "description": "开头明确本文档的用途",
                    "pattern": "^# 项目代码审查指南\\s+## 项目概览",
                    "replacement": "# 项目代码审查指南\n\n\n> 本文档为 AI 助手提供项目快速理解所需的关键信息\n\n\n## 项目概览",
                    "flags": [],
                    "scope": [
                        "*"
                    ]
                },
                {
                    "operation": "replace",
                    "description": "替换项目职责部分，不只是review代码，还有工作计划等",
                    "pattern": "## 项目职责.*?(?=\\n##|\\Z)",
                    "replacement": "## 项目职责\n\n你是一个专业的游戏开发专家，你的主要职责是使用本文档和相关的skill/rule执行工作计划或者代码review。\n",
                    "flags": [
                        "DOTALL"
                    ],
                    "scope": [
                        "*"
                    ]
                },
                {
                    "operation": "append_end",
                    "description": "文档末尾追加特别声明，要求简体中文输出，以及注意节省token",
                    "content": "\n\n## 特别声明\n\n- 推理的过程和最终的结果需要使用简体中文。\n- review相关skill，也可用于执行工作计划时作为代码生成的规范化指南。\n- 除非我要求，否则不要生成总结文档(reademe.md之类的)，并且摘要总结尽可能精简，如果不清晰，我会主动询问，我额外总结了 token-savings 这个规则供你参考，减少不必要的token消耗。\n",
                    "scope": [
                        "*"
                    ]
                }
            ]
        },
        "remoteLLMReviewRules/.codebuddy/skills/**/*.md": {
            "filter": [
                {
                    "operation": "frontmatter_has",
                    "description": "需包含name/description frontmatter",
                    "fields": [
                        "name",
                        "description"
                    ],
                    "scope": [
                        "cursor"
                    ]
                }
            ],
            "process": [
                {
                    "operation": "replace",
                    "description": "删除文件开头的 frontmatter",
                    "pattern": "^---\\s*\\n[\\s\\S]*?\\n---\\s*\\n",
                    "replacement": "",
                    "flags": [],
                    "scope": [
                        "cursor"
                    ]
                },
                {
                    "operation": "append_start",
                    "description": "cursor 目标添加 alwaysApply frontmatter",
                    "content": "---\nalwaysApply: true\n---\n\n",
                    "scope": [
                        "cursor"
                    ]
                },
                {
                    "operation": "rewrite_links_to_claude",
                    "description": "将同目录相对链接指向 claude 任务的目标路径",
                    "target_task": "claude",
                    "link_prefix": "../..",
                    "scope": [
                        "cursor"
                    ]
                }
            ]
        },
        "skills/**/*.md": {
            "filter": [
                {
                    "operation": "frontmatter_has",
                    "description": "需包含name/description frontmatter",
                    "fields": [
                        "name",
                        "description"
                    ],
                    "scope": [
                        "cursor"
                    ]
                }
            ],
            "process": [
                {
                    "operation": "replace",
                    "description": "删除文件开头的 frontmatter",
                    "pattern": "^---\\s*\\n[\\s\\S]*?\\n---\\s*\\n",
                    "replacement": "",
                    "flags": [],
                    "scope": [
                        "cursor"
                    ]
                },
                {
                    "operation": "append_start",
                    "description": "cursor 目标添加 alwaysApply frontmatter",
                    "content": "---\nalwaysApply: true\n---\n\n",
                    "scope": [
                        "cursor"
                    ]
                },
                {
                    "operation": "rewrite_links_to_claude",
                    "description": "将同目录相对链接指向 claude 任务的目标路径",
                    "target_task": "claude",
                    "link_prefix": "../..",
                    "scope": [
                        "cursor"
                    ]
                }
            ]
        }
    },
    "tasks": [
        {
            "name": "cursor",
            "distribute": [
                {
                    "source": {
                        "type": "file",
                        "path": "remoteLLMReviewRules/CODEBUDDY.md"
                    },
                    "rename": "CLAUDE.md",
                    "copy": ""
                },
                {
                    "source": {
                        "type": "directory",
                        "path": "remoteLLMReviewRules/.codebuddy/skills",
                        "pattern": "**/*.md"
                    },
                    "filter": [
                        {
                            "operation": "frontmatter_has",
                            "description": "需包含name/description frontmatter",
                            "fields": [
                                "name",
                                "description"
                            ],
                            "negate": false
                        }
                    ],
                    "rename_rule": {
                        "foldername": true,
                        "lowercase": true,
                        "replacements": [
                            {
                                "from": "soul-",
                                "to": ""
                            },
                            {
                                "from": "_",
                                "to": "-"
                            }
                        ]
                    },
                    "copy": ".cursor/rules",
                    "suffix": "mdc"
                },
                {
                    "source": {
                        "type": "directory",
                        "path": "skills",
                        "pattern": "**/*.md"
                    },
                    "filter": [
                        {
                            "operation": "frontmatter_has",
                            "description": "需包含name/description frontmatter",
                            "fields": [
                                "name",
                                "description"
                            ],
                            "negate": false
                        }
                    ],
                    "rename_rule": {
                        "foldername": true,
                        "lowercase": true,
                        "replacements": [
                            {
                                "from": "_",
                                "to": "-"
                            }
                        ]
                    },
                    "copy": ".cursor/rules",
                    "suffix": "mdc"
                }
            ]
        },
        {
            "name": "claude",
            "generate_settings": {
                "target": ".claude/settings.local.json",
                "default_permission": "allow"
            },
            "distribute": [
                {
                    "source": {
                        "type": "file",
                        "path": "remoteLLMReviewRules/CODEBUDDY.md"
                    },
                    "rename": "CLAUDE.md",
                    "copy": ""
                },
                {
                    "source": {
                        "type": "directory",
                        "path": "remoteLLMReviewRules/.codebuddy/skills",
                        "pattern": "**/*.md"
                    },
                    "rename_rule": {
                        "apply_to": [
                            "parent"
                        ],
                        "lowercase": true,
                        "replacements": [
                            {
                                "from": "soul-",
                                "to": ""
                            },
                            {
                                "from": "_",
                                "to": "-"
                            }
                        ]
                    },
                    "copy": ".claude/skills",
                    "use_parent_dir": true
                },
                {
                    "source": {
                        "type": "directory",
                        "path": "skills",
                        "pattern": "**/*.md"
                    },
                    "copy": ".claude/skills",
                    "use_parent_dir": true
                }
            ]
        },
        {
            "name": "codebuddy",
            "generate_settings": {
                "target": ".codebuddy/settings.local.json",
                "default_permission": "allow"
            },
            "distribute": [
                {
                    "source": {
                        "type": "file",
                        "path": "remoteLLMReviewRules/CODEBUDDY.md"
                    },
                    "rename": "CLAUDE.md",
                    "copy": ""
                },
                {
                    "source": {
                        "type": "directory",
                        "path": "remoteLLMReviewRules/.codebuddy/skills",
                        "pattern": "**/*.md"
                    },
                    "rename_rule": {
                        "apply_to": [
                            "parent"
                        ],
                        "lowercase": true,
                        "replacements": [
                            {
                                "from": "soul-",
                                "to": ""
                            },
                            {
                                "from": "_",
                                "to": "-"
                            }
                        ]
                    },
                    "copy": ".codebuddy/skills",
                    "use_parent_dir": true
                },
                {
                    "source": {
                        "type": "directory",
                        "path": "skills",
                        "pattern": "**/*.md"
                    },
                    "copy": ".codebuddy/skills",
                    "use_parent_dir": true
                }
            ]
        }
    ]
}